# API仕様書

## 1. API設計概要
- ユーザー体験を向上させるため、画面遷移を伴わない非同期通信を行うためのAPIを設計する。
- 主に、お気に入り機能や動的な検索機能で使用する。
- 通信形式は、現代のWeb開発で標準的なJSON形式とする。

## 2. APIエンドポイント定義

### 2.1. お気に入り登録/解除 API
- **機能概要**: ユーザーが大会詳細ページでお気に入りボタンを押した際の処理を行う。
- **エンドポイント**: `/api/tournaments/<int:tournament_id>/favorite/`
    - `<int:tournament_id>` の部分には、対象となる大会のID番号が入ります。
- **メソッド**:
    - `POST`: お気に入りに**登録**する。
    - `DELETE`: お気に入りを**解除**する。
- **認証**: 必須 (ログインしているユーザーのみが利用可能)
- **レスポンス (成功時)**:
    ```json
    {
      "status": "success",
      "is_favorited": true 
    }
    ```
    - `is_favorited` には、処理後の状態 (お気に入り登録済みか否か) が入ります。

### 2.2. 大会情報 検索API
- **機能概要**: 大会一覧ページで、地域や日付などの条件で動的に絞り込み検索を行う。
- **エンドポイント**: `/api/tournaments/`
- **メソッド**: `GET`
- **リクエスト (クエリパラメータ)**:
    - `?region=tokyo` (地域で絞り込み)
    - `?event_date_after=2025-07-01` (指定日以降の大会を検索)
    - `?keywords=ジュニア` (キーワードで検索)
- **レスポンス (成功時)**:
    ```json
    {
      "count": 15,
      "tournaments": [
        {
          "id": 101,
          "name": "〇〇区民バドミントン大会",
          "event_date": "2025-07-15",
          "venue_name": "〇〇スポーツセンター"
        },
        {
          "id": 102,
          "name": "△△オープン2025",
          "event_date": "2025-07-20",
          "venue_name": "△△体育館"
        }
      ]
    }
    ```
    - 検索結果に合致した大会情報の一覧が返されます。